<!DOCTYPE html>
<html>

<!-- Mirrored from themazine.com/html/alquran/record-class.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 28 Oct 2024 08:23:53 GMT -->

<head>
	<meta charset="utf-8">
	<title>Certificate</title>
	<!-- Stylesheets -->
	<link href="assets/css/bootstrap.css" rel="stylesheet">
	<link href="assets/css/style.css" rel="stylesheet">
	<link href="assets/css/responsive.css" rel="stylesheet">
	<link rel="stylesheet" href="test.css">

	<link href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;500;600;700;800;900&amp;display=swap"
		rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&amp;display=swap"
		rel="stylesheet">

	<link rel="shortcut icon" href="assets/images/logo.png" type="image/x-icon">
	<link rel="icon" href="assets/images/logo.png" type="image/x-icon">
	<style>
		.body {
			font-family: Arial, sans-serif;
			margin: 0;
			padding: 0;
			display: flex;
			justify-content: center;
			align-items: center;
			height: 100vh;
			background-color: #f9f9f9;
		}

		.container1 {
			text-align: center;
			max-width: 600px;
			margin: 40px auto 0 auto;
			background: #fff;
			border-radius: 18px;
			box-shadow: 0 4px 24px rgba(0, 0, 0, 0.08);
			padding: 2.5rem 2rem 2rem 2rem;
		}


		.container1 h1 {
			font-size: 2.2rem;
			font-weight: 700;
			color: #4a7c59;
			margin-bottom: 2rem;
		}

		.cert-section-title {
			font-size: 1.3rem;
			font-weight: 600;
			color: #485dbd;
			margin: 2.2rem 0 1.2rem 0;
			letter-spacing: 0.5px;
		}

		.cert-card {
			margin: 18px 0;
			padding: 22px 18px 18px 18px;
			border: 1.5px solid #e0e7ef;
			border-radius: 14px;
			background: linear-gradient(135deg, #f8fafc, #e2f0e4 80%);
			box-shadow: 0 2px 8px rgba(102, 126, 234, 0.07);
			text-align: left;
			display: flex;
			flex-direction: column;
			align-items: flex-start;
		}

		.cert-card.issued {
			background: linear-gradient(135deg, #f0f7fa, #e2eafc 80%);
		}

		.cert-card b {
			font-size: 1.15rem;
			color: #2d3a4a;
		}

		.cert-card button {
			margin-top: 14px;
			background: #43c522;
			color: #fff;
			border: none;
			border-radius: 6px;
			padding: 8px 22px;
			font-weight: 600;
			font-size: 1rem;
			box-shadow: 0 2px 8px rgba(102, 126, 234, 0.09);
			transition: background 0.2s;
		}

		.cert-card.issued button {
			background: #007bff;
		}

		.cert-card button:hover {
			background: #2e9e1c;
		}

		.cert-card.issued button:hover {
			background: #0056b3;
		}

		select {
			display: block;
			width: 100%;
			margin: 10px 0;
			padding: 10px;
			font-size: 16px;
			border: 1px solid #ccc;
			border-radius: 4px;
		}

		.in {
			display: block;
			height: 40px;
			margin: 10px 0;
			padding: 10px;
			font-size: 16px;
			border: 1px solid #ccc;
			border-radius: 4px;
		}

		button {
			background-color: #fdbc00;
			border: none;
			color: white;
			font-weight: bold;
			cursor: pointer;
			display: block;
			width: 200px;
			margin: 10px 0;
			padding: 10px;
			font-size: 16px;
			border: 1px solid #ccc;
			border-radius: 4px;
			width: 303px;
		}

		button:disabled {
			background-color: #ccc;
			cursor: not-allowed;
		}

		button:hover:not(:disabled) {
			background-color: #e0a700;
		}

		.background-pattern {
			position: fixed;
			top: 0;
			bottom: 0;
			left: 0;
			right: 0;
			background-image: url('pattern-placeholder.png');
			/* Add pattern URL */
			opacity: 0.1;
			z-index: -1;
		}

		.refer-button {
			display: inline-block;
			height: 40px;
			margin: 2px 0;
			padding: 8px 12px;
			background-color: #f0f0f0;
			border: 1px solid #ccc;
			border-radius: 4px;
			cursor: pointer;
			font-size: 15px;
			color: black;
			font-style: normal;
		}

		.refer-button:hover {
			background-color: #e0e0e0;
		}

		.popup {
			display: none;
			position: fixed;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			background: #fff;
			padding: 20px;
			border-radius: 8px;
			box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
			width: 550px;
			z-index: 1000;
			color: black;
		}

		.popup input,
		.popup button {
			margin: 10px 0;
			width: calc(100% - 20px);
			padding: 10px;
			font-size: 14px;
			border: 1px solid #ccc;
			border-radius: 4px;
		}

		.popup button {
			background-color: #007bff;
			color: white;
		}

		.popup button:hover {
			background-color: #0056b3;
		}

		.overlay {
			display: none;
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background: rgba(0, 0, 0, 0.5);
			z-index: 999;
		}

		.input-group input {
			height: 40px;
		}
	</style>

	<!-- Responsive -->
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">

	<!--[if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.js"></script><![endif]-->
	<!--[if lt IE 9]><script src="js/respond.js"></script><![endif]-->
</head>

<body>

	<div class="page-wrapper">

		<!-- Cursor -->
		<div class="cursor"></div>
		<div class="cursor-follower"></div>
		<!-- Cursor End -->

		<!-- Preloader -->
		<div class="preloader"></div>
		<!-- End Preloader -->

		<!-- Main Header -->
		<header class="main-header">

			<!-- Header Top -->
			<div class="header-top">
				<div class="auto-container">
					<div class="inner-container">
						<div class="d-flex justify-content-between align-items-center flex-wrap">
							<div class="left-box d-flex align-items-center flex-wrap">
								<!-- Info List -->
								<ul class="header-top_list">
									<li><span class="icon fa-solid fa-envelope fa-fw"></span>asteptowardshaq@gmail.com
									</li>
									<!-- <li><span class="icon fa-solid fa-envelope fa-fw"></span>hello123@gmail.com</li> -->
								</ul>
							</div>
							<img src="assets/images/icons/bismillah.png" class="plass">
							<ul class="header-top_list-two">
								<li><span class="icon fa-regular fa-sun fa-fw"></span>Sunrise At: 5:15 AM</li>
								<li><span class="icon fa-solid fa-moon fa-fw"></span>Sunset At: 4:50 PM</li>
								<li><span class="icon fa-solid fa-phone fa-fw"></span>Letâ€™s Talk +92 326 1420047</li>
							</ul>
						</div>
					</div>
				</div>
			</div>

			<!-- Header Upper -->
			<div class="header-upper">
				<div class="auto-container">
					<div class="inner-container">
						<div class="d-flex justify-content-between align-items-center flex-wrap">

							<div class="logo-box">
								<div class="logo"><a href="index.html"><img class="logo" src="assets/images/logo.png"
											alt="" title=""></a></div>
							</div>

							<div class="nav-outer">
								<!-- Main Menu -->
								<nav class="main-menu navbar-expand-md">
									<div class="navbar-header">
										<!-- Toggle Button -->
										<button class="navbar-toggler" type="button" data-toggle="collapse"
											data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
											aria-expanded="false" aria-label="Toggle navigation">
											<span class="icon-bar"></span>
											<span class="icon-bar"></span>
											<span class="icon-bar"></span>
										</button>
									</div>
									<div class="navbar-collapse collapse clearfix" id="navbarSupportedContent">
										<ul class="navigation clearfix">
											<li class="dropdown"><a href="index.html">Home</a>

											<li><a href="courses.html">Courses</a></li>
											<li><a href="certificate.html">Certificate</a></li>
											<li><a href="scholars.html">Scholars</a></li>
											<li><a href="about.html">About</a></li>
											<li><a href="contact.html">Contact</a></li>
											<li><a href="login.html">Login/Profile</a></li>
										</ul>
									</div>
								</nav>
							</div>

							<!-- Main Menu End-->
							<div class="outer-box d-flex align-items-center flex-wrap">

								<!-- Search Btn -->
								<div class="search-box-btn search-box-outer"><span class="icon fa fa-search"></span>
								</div>

								<!-- User Box -->
								<a class="user-box theme-btn" href="login.html">
									<span class="fa-regular fa-user fa-fw"></span>
								</a>

								<!-- Button Box -->
								<div class="header_button-box">
									<a href="login.html" class="theme-btn btn-style-one">
										<span class="btn-wrap">
											<span class="text-one">Quick Join Now</span>
											<span class="text-two">Quick Join Now</span>
										</span>
									</a>
								</div>

								<!-- Mobile Navigation Toggler -->
								<div class="mobile-nav-toggler"><span class="icon flaticon-menu"></span></div>
							</div>

						</div>
					</div>
				</div>
			</div>
			<!--End Header Upper-->

			<!-- Mobile Menu  -->
			<div class="mobile-menu">
				<div class="menu-backdrop"></div>
				<div class="close-btn"><span class="icon flaticon-close-1"></span></div>

				<nav class="menu-box">
					<div class="nav-logo"><a href="index.html"><img src="assets/images/logo.png" alt="" title=""></a>
					</div>
					<div class="menu-outer">
						<!--Here Menu Will Come Automatically Via Javascript / Same Menu as in Header-->
					</div>
				</nav>
			</div>
			<!-- End Mobile Menu -->

		</header>
		<!-- End Main Header -->

		<!-- Page Title -->
		<section class="page-title" style="background-image:url(assets/images/background/page-title.jpg)">
			<div class="auto-container">
				<h2>Certificate</h2>
				<ul class="bread-crumb clearfix">
					<li><a href="index.html">Home</a></li>
					<li>Certificate</li>
				</ul>
			</div>
		</section>
		<!-- End Page Title -->
		<div class="body">
			<div class="background-pattern"></div>
			<div>
				<div class="container1">
					<h1>Certificate</h1>
					<div id="cert-message" style="color: red; font-weight: bold;"></div>
					<div id="eligible-courses"></div>
				</div>
				<div class="cert-section-title" style="margin-bottom: 1rem;">Payment Details</div>
				<div class="cert-card"
					style="background: #fffbe6; border: 1.5px solid #ffe58f; color: #856404; margin-bottom: 1.5rem;">
					<b>To receive your certificate, please make payment to:</b><br>
					<ul style="margin: 10px 0 0 18px;">
						<li><b>JazzCash:</b> 0300-1234567 (Name: Your Name)</li>
						<li><b>EasyPaisa:</b> 0300-1234567 (Name: Your Name)</li>
						<li><b>Bank Account:</b> 1234567890 (Meezan Bank, Title: Your Name)</li>
					</ul>
					<div style="margin-top: 10px; font-size: 0.98rem;">After payment, please WhatsApp your name, course,
						and payment screenshot to <b>0300-1234567</b> for verification.</div>
				</div>

			</div>

			<div class="overlay" id="overlay"></div>
			<div class="popup" id="popup">
				<h2>Invite friends through email</h2>
				<input type="text" id="email-input" placeholder="Add Email addresses">
				<button id="send-email">Send</button>
				<p>Or share your personal referral link</p>
				<div style="display: flex; align-items: center; margin-bottom: 10px;">
					<input type="text" id="referral-link" value="https://www.example.com/referral" readonly>
					<button id="copy-link">Copy</button>
				</div>
				<p>Share on social platforms:</p>
				<div style="display: flex; gap: 10px; justify-content: center;">
					<a href="https://www.facebook.com/sharer/sharer.php?u=https://www.example.com/referral"
						target="_blank">
						<img src="https://upload.wikimedia.org/wikipedia/commons/5/51/Facebook_f_logo_%282019%29.svg"
							alt="Facebook" width="32">
					</a>
					<a href="https://wa.me/?text=https://www.example.com/referral" target="_blank">
						<img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp"
							width="32">
					</a>
					<a href="https://www.instagram.com/" target="_blank">
						<img src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png"
							alt="Instagram" width="32">
					</a>
				</div>
			</div>

			<script src="config.js"></script>
			<script>
				// Require login for certificate page
				const token = localStorage.getItem('token');
				if (!token) {
					window.location.href = 'login.html?redirect=' + encodeURIComponent(window.location.href);
				}

				// Fetch eligible courses for certificate
				async function loadEligibleCourses() {
					const certMsg = document.getElementById('cert-message');
					const eligibleDiv = document.getElementById('eligible-courses');
					certMsg.textContent = '';
					eligibleDiv.innerHTML = '<div>Loading your certificates...</div>';
					try {
						// Fetch both eligible and already-issued certificates
						const res = await fetch(window.API_BASE_URL + "/api/test/eligible-certificates", {
							headers: { 'Authorization': 'Bearer ' + token }
						});
						if (!res.ok) throw new Error('Failed to fetch');
						const data = await res.json();
						// data: { courses: [...], issued: [...] }
						const eligible = data.courses || [];
						const issued = data.issued || [];
						let html = '';
						if (eligible.length === 0 && issued.length === 0) {
							eligibleDiv.innerHTML = '';
							certMsg.textContent = 'You are not eligible for any certificates yet. Complete a course and pass the test!';
							return;
						}
						if (eligible.length > 0) {
							html += '<div class="cert-section-title">Eligible for Certificate</div>';
							html += eligible.map(course => `
					<div class="cert-card">
						<b>${course.name}</b><br>
						<button type="button" onclick="downloadCertificate(${course.id})">Download Certificate</button>
					</div>
				`).join('');
						}
						if (issued.length > 0) {
							html += '<div class="cert-section-title">Certificates Already Issued</div>';
							html += issued.map(course => `
					<div class="cert-card issued">
						<b>${course.name}</b><br>
						<button onclick="downloadCertificate(${course.id})">Download Again</button>
					</div>
				`).join('');
						}
						eligibleDiv.innerHTML = html;
					} catch (e) {
						eligibleDiv.innerHTML = '';
						certMsg.textContent = 'Error loading certificates.';
					}
				}

				// Download certificate function
				window.downloadCertificate = function (courseId) {
					console.log('[DEBUG] Downloading certificate from:', courseId);
					console.log('[DEBUG] Token being sent:', token);
					fetch(window.API_BASE_URL + "/api/test/certificate/download?course=" + courseId, {
						headers: { 'Authorization': 'Bearer ' + token }
					})
						.then(async res => {
							console.log('[DEBUG] Full response:', res);
							console.log('[DEBUG] Response status:', res.status, res.statusText);
							console.log('[DEBUG] Response headers:');
							for (let pair of res.headers.entries()) {
								console.log('   ', pair[0] + ':', pair[1]);
							}
							const contentType = res.headers.get('content-type');
							console.log('[DEBUG] Content-Type:', contentType);
							if (!res.ok) {
								// Try to read error message as text
								const errText = await res.text();
								console.error('[DEBUG] Error response text:', errText);
								throw new Error('Certificate not ready: ' + errText);
							}
							// If not image/png, log the text for debugging
							if (!contentType || !contentType.includes('image/png')) {
								//const text = await res.text();
								//console.warn('[DEBUG] Response is not PNG. Text:', text);
								//alert('Unexpected response: ' + text);
								throw new Error('Response is not a PNG');
							}
							return res.blob();
						})
						.then(blob => {
							console.log('[DEBUG] Received blob:', blob);
							const url = window.URL.createObjectURL(blob);
							const a = document.createElement('a');
							a.href = url;
							a.download = 'certificate.png';
							document.body.appendChild(a);
							a.click();
							a.remove();
							window.URL.revokeObjectURL(url);
							console.log('[DEBUG] Download triggered');
						})
						.catch((err) => {
							console.error('[DEBUG] Download error:', err);
							alert('Certificate not available yet. ' + (err && err.message ? err.message : ''));
						});
				}

				loadEligibleCourses();
			</script>
		</div>
		<!-- Footer Style -->
		<footer class="main-footer">
			<div class="footer_bg-image" style="background-image: url(assets/images/background/footer-bg.jpg)"></div>
			<div class="auto-container">
				<div class="inner-container">
					<!-- Widgets Section -->
					<div class="widgets-section">
						<div class="row clearfix">

							<!-- Big Column -->
							<div class="big-column col-lg-6 col-md-12 col-sm-12">
								<div class="row clearfix">

									<!-- Footer Column -->
									<div class="footer-column col-lg-6 col-md-6 col-sm-12">
										<div class="footer-widget logo-widget">
											<div class="footer-logo"><a href="index.html"><img
														src="assets/images/footer-logo.png" style="width: 60%;"></a>
											</div>
											<!-- Footer List -->
											<div class="footer_list">
												<li>+92 326 1420047</li>
											</div>
											<!-- Social Box -->
											<div class="footer_socials">
												<div>
													<a href="https://facebook.com/"><i
															class="fa-brands fa-facebook-f"></i></a>
													<a href="https://wa.me/+923261420047"><i
															class="fa-brands fa-whatsapp"></i></a>
													<a
														href="https://youtube.com/@a_step_towards_haq?si=iiLH6sLAEjM-aUw0"><i
															class="fa-brands fa-youtube"></i></a>
												</div>
												<div class=".he" style="margin-top: 4px;">
													<a
														href="https://www.snapchat.com/add/asteptowardshaq?share_id=QT5D7OeFhWg&locale=en-GB"><i
															class="fa-brands fa-snapchat"></i></a>
													<a
														href="https://www.tiktok.com/@a_step_towards_haq?_t=ZS-8sqeo7VFicC&_r=1"><i
															class="fa-brands fa-tiktok"></i></a>
													<a href="https://instagram.com/"><i
															class="fa-brands fa-instagram"></i></a>
												</div>
											</div>
										</div>
									</div>

									<!-- Footer Column -->
									<div class="footer-column col-lg-6 col-md-6 col-sm-12">
										<div class="footer-widget links-widget">
											<h4 class="footer-title">Links</h4>
											<ul class="footer-list">
												<li><a href="about.html">About us</a></li>
												<li><a href="scholars.html">Scholars</a></li>
												<li><a href="courses.html">Courses</a></li>
												<li><a href="contact.html">Contact</a></li>
											</ul>
										</div>
									</div>

								</div>
							</div>

							<!-- Big Column -->
							<div class="big-column col-lg-6 col-md-12 col-sm-12">
								<div class="row clearfix">

									<!-- Footer Column -->
									<div class="footer-column col-lg-6 col-md-6 col-sm-12">
										<div class="footer-widget links-widget">
											<h4 class="footer-title">Other Link</h4>
											<ul class="footer-list">
												<li><a href="#">Online Courses</a></li>
												<li><a href="#">Audio Listening</a></li>
												<li><a href="login.html">Certificate</a></li>
											</ul>
										</div>
									</div>

									<!-- Footer Column -->
									<div class="footer-column col-lg-6 col-md-6 col-sm-12">
										<div class="footer-widget newsletter-widget">
											<h4 class="footer-title">newsletter</h4>
											<div class="footer-text">Waiting for your message!</div>
											<div class="newsletter-box">
												<form method="post"
													action="https://themazine.com/html/alquran/contact.html">
													<div class="form-group">
														<input type="email" name="search-field" value=""
															placeholder="email address" required>
														<button type="submit"
															class="theme-btn fa-regular fa-paper-plane fa-fw"></button>
													</div>
												</form>
											</div>
										</div>
									</div>

								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</footer>
		<!-- End Footer Style -->

		<!-- Search Popup -->
		<div class="search-popup">
			<div class="color-layer"></div>
			<button class="close-search"><span class="flaticon-close-1"></span></button>
			<form method="post" action="https://themazine.com/html/alquran/blog.html">
				<div class="form-group">
					<input type="search" name="search-field" value="" placeholder="Search Here" required="">
					<button class="fa fa-solid fa-magnifying-glass fa-fw" type="submit"></button>
				</div>
			</form>
		</div>
		<!-- End Search Popup -->

	</div>
	<!-- End PageWrapper -->

	<div class="progress-wrap">
		<svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
			<path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98" />
		</svg>
	</div>

	<script src="assets/js/jquery.js"></script>
	<script src="assets/js/popper.min.js"></script>
	<script src="assets/js/bootstrap.min.js"></script>
	<script src="assets/js/appear.js"></script>
	<script src="assets/js/parallax.min.js"></script>
	<script src="assets/js/tilt.jquery.min.js"></script>
	<script src="assets/js/jquery.paroller.min.js"></script>
	<script src="assets/js/wow.js"></script>
	<script src="assets/js/jarallax.js"></script>
	<script src="assets/js/swiper.min.js"></script>
	<script src="assets/js/backtotop.js"></script>
	<script src="assets/js/odometer.js"></script>
	<script src="assets/js/parallax-scroll.js"></script>

	<script src="assets/js/gsap.min.js"></script>
	<script src="assets/js/SplitText.min.js"></script>
	<script src="assets/js/ScrollTrigger.min.js"></script>
	<script src="assets/js/ScrollToPlugin.min.js"></script>
	<script src="assets/js/ScrollSmoother.min.js"></script>

	<script src="assets/js/magnific-popup.min.js"></script>
	<script src="assets/js/nav-tool.js"></script>
	<script src="assets/js/jquery-ui.js"></script>
	<script src="assets/js/element-in-view.js"></script>
	<script src="assets/js/script.js"></script>

</body>

<!-- Mirrored from themazine.com/html/alquran/record-class.html by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 28 Oct 2024 08:24:02 GMT -->

</html>